# 人设

> 暂定

## 主角

> 尽量描写为中性，避免带有强烈性格色彩的叙述（尽量

- 风趣
- 较为强烈的好奇心
- 适应性强，能够快速接受现状

## Hitomi

> 用了罗马音作为伏笔，记得圆回来

- 有趣（？

---

# 正文

> 做到游戏里会改的

## 序章

“呃啊，我是谁，我这是在哪里？”，你缓缓睁开双眼，却发现自己来到了一片奇诡的“荒野”，说是荒野，但地面四分五裂，重力仿佛不复存在——楼宇、飞船、各类家具甚至动物都糅杂在一起，难舍难分。“玩家昵称，欢迎来到由往生实践设施创建的实验世界-8号，我是这个世界的ai-hito”一个飘渺却明丽的声音传来，“什么设施？我记得我刚才还在教室里啊。”那个声音慌道“不好了，是记忆衰退，看来我们的传输技术还是不够成熟。虽然你的意识得以传入，但记忆却丢失了太多。可事到如今也没办法了，听着，你是设施的高级研究员，设施的目的是研究并制造一个虚拟的数字世界，来让即将逝去的人在其中永远活下去。然而我们8号试验场因为不明原因发生了数据大崩坏，所有数据混杂在一起无法分类，而自动修复的程序包括我的计算系统也被黑掉了。又因为实验世界自主条例，只能从里世界修复里世界，因此你的任务恰如盘古，需要用聚类的知识把天地万物分开，让世界从混沌的状态回归常态!”“唔，可是我的记忆还停留在大学二年级，并不懂什么聚类啊！”。“没办法了，我会将几种聚类算法的概念给你阅读，但这是我唯一能做的事情了，学习聚类算法，然后则其适者加以应用来拯救这个世界吧！”

进入学习页面。

## 概念介绍

P：聚类听着就像把一堆数据分成几类，这里面有什么奥妙呢？

H：没错，聚类是针对给定的样本，依据它们特征的相似度或距离，将其归并到若干个“类”或“簇”的数据分析问题，其结果满足，类内部相似，类之间不相似。注意它和分类有一定区别，聚类的对象仅仅是一堆数据，这些数据本身是不带标签的，所以聚类可以算作一种无监督学习。

H：就好像我们现在所面临的情况，各种组成物体的数据开始混杂在一起，各种物体的界限不再分明，我们要做的就是将这些逐渐混乱的数据重新分成一个个簇，让物体不再混乱。

P：嗯~听你讲的好像也不难的呀，那我该怎么用聚类呢？总不能我把这些数据一个个用袋子封装好吧？

H：这就要涉及到我们的算法了，为了实现聚类的目的，我们可以使用三种算法：模型聚类算法K-means、密度聚类算法DBSCAN和层次聚类算法Agnes，它们各有各的特点，虽然都能完成聚类的目的，但是聚类出的结果其实各自有所不同。当然，实现聚类可以用的算法远远不止这三个，只不过这三个算法已经可以满足我们的需求，并且也足够你这个大学生领悟了（笑）。

P：（怎么感觉在骂我？？？）好吧，那我速速学习一下吧，来！

### 模型聚类算法K-means

H：那么先来看Kmeans算法，这个算法是最常被使用的算法，它认为两个目标的距离越近，相似度越大。

P：有没有什么通俗例子？

H：有啊，把每个样本点比作一个村庄的村民，你是天主教堂的教皇，要选派几个牧师去传授福音（人啊你在寻找什么？），必须把每个村民覆盖在内。但是牧师们并不知道这个村庄的村民分布情况，于是他们各自选择了任意地点驻扎下来并广告村民。聪明的村民当然会选择最近的牧师去登记，于是每个牧师手里都有了一份名单（簇）。他一想：欸，为了天父我要让我的信众们享受更近的距离，于是他搬到了名单上所有地址的中心地带。所有牧师这样做以后，有的村民发现：离自己最近的牧师换了，于是名单再次更新了，牧师为了信众考虑又搬了家，循环往复不知多少次，终于牧师发现自己可以不用搬家了，于是他们把名单交给了你，对这个村庄的聚类也就此完成了。

### 密度聚类DBSCAN

P：噢噢噢噢！amen！这样就可以把距离近的数据聚成一类了！！看来我只要设置牧师数量（簇的数量）和迭代次数就可以完成聚类了！那密度聚类DBSCAN算法呢？

H：顾名思义，这是根据密度进行聚类的算法，还是以二位样本举例，坐标系中有很多的点，每个点以自己为圆心，r为半径作圆，形成一个“朋友圈”。
统计一下在这个圆内的点的数量，计它为“好朋友数“。由你输入一个数n，如果一个点的好朋友数大于等于n，就说这个点是一个”交际花“。我们知道，交际花总是会相互吸引的，那么一个交际花的好朋友里由另一个交际花也是很正常的，因此我们规定，如果一个交际花A的朋友圈里有令一个交际花B，那我就让他们的朋友圈合并，形成一个簇。依此规则，这个朋友圈不断扩大，最后直到所有能被包含的交际花都被包含进去了，这个簇就算完事了。最后我们可以得到一个由密度主导的聚类结果，这个结果中，如果一些点的朋友圈太小，就会被淘汰出去，可见它和Kmeans有大不同的。

P：不合群就会被淘汰？？太哈人了！！那我设置参数的时候，可要把n调的小一点了！

H：你确实可以这样做，但是既然我们要聚类，就需要舍弃一些离群太远的点，它们对结果造成的误差可是很大的！我们也因此称它们为噪声。

### 层次聚类Agnes

P：好吧，那层次聚类Agnes呢？

H：这个你就非常熟悉了！数据结构学过吧？二叉树里的哈夫曼树学过吧？对于这么多个点，我先把它们相互之间的距离全部算出来，我每次都取两个最近的点，把他们变成一个簇。对于这个簇，我们仍然把它看成一个点，就像哈夫曼树的构造那样子。于是我们重复这个过程，直到簇的数量聚成一个。至于簇怎么看成一个点来计算距离，我这里给你三种方法：
1. 最小值：就是取两个类中距离最近的两个样本的距离作为这两个集合的距离，
2. 最大值：取两个集合中距离最远的两个点的距离作为两个集合的距离
3. 平均值：把两个集合中的点两两的距离全部放在一起求一个平均值，相对也能得到合适一点的结果。

你看，这样我就介绍完了这些聚类方法了~赶紧干活吧！！

### 介绍之后

P：我说停停，我是差不多知道它们的工作原理了啦，但是它们在各种情况下孰优孰劣我还没实践过啊！至少，把它们的优缺点也和我一叙呗。

H：呃呃，高级研究员在大学的时候这么差劲啊，好，你听着吧：对于Kmeans来说，如果有一个村民他住在山沟沟里，牧师也要为他一个人搬到山沟沟里，所以Kmeans算法不适合太离散的分类、样本类别不平衡的分类、非凸形状的分类。而DBSCAN因为可以不管离群的点，它的抗噪音性自然强了太多了，而且它可以聚出很有形状的类来，不像Kmeans，总是只给出一片片的聚类结果。不过DBSCAN也有限制的，如果样本集的密度不均匀、聚类间距差相差很大时，聚类质量较差，这时用DBSCAN聚类一般不适合。最后是层次聚类Agnes，它的优点很明显，前两种算法都需要给出很多参数，但我Agnes啥都不用给，也能聚地很有形状，又可以发现簇之间的层次关系，是很省事的方法。不过呢，你省事了，我就苦了，这从头到尾的，得算多少个距离啊，更别提这簇与簇之间的距离，算的我都发烧了！

P：你说得对，呃，我还是想要一些例子，要不你给我几张图，我来看看用三种聚类算法分别聚类以后它们的实际效果？

H：好吧，你操作就是了，快点领悟吧！

展示图片，方便领悟
P：唔，差不多了，我觉得我已经领悟了聚类算法的真谛，速速来点实战环节吧！
H：嗯~那我们就从简单的数据集开始，修复灵薄域吧！首先是花朵，这里我们从鸢尾花(iris)数据集入手，用三种聚类算法对其进行聚类！这是数据集降维到二维以后的样子。在这个数据集里面，每个样本包含了花萼长度、花萼宽度、花瓣长度、花瓣宽度四个特征，我们需要通过聚类来判断样本属于山鸢尾、变色鸢尾还是维吉尼亚鸢尾。
下面我们先从kmeans算法开始吧
题目1：要设置k=？
P：噢，三类是这样分的，不知道准确度如何?
H: 效果图，这张是DBSCAN的聚类效果图。
P：嗯，有三个点的归属发生了变化，但是其实它们分在…会更好，在这点上…
H：嗯，聚类完成了，花的模型我会算出来的，一会就告诉你，接下来我们来对酒类进行聚类吧！Wine葡萄酒数据集是对意大利同一地区种植的葡萄酒进行化学分析的结果，这些葡萄酒来自不同的品种。我们需要分析确定葡萄酒中每种葡萄酒中含有的13种成分的数量，然后对其余葡萄酒进行分析发现该葡萄酒的分类。以下是它们的属性

这是他们的降维到二维以后的数据形态
这次我们并不知道这些葡萄酒的数据来自哪些品种，也不知道它们原本会被分成几类，但这样的无标签聚类正是修复我们混乱的世界的主要方法！
P：那我要如何判断聚成几类是最合适的呢？
H：一种通过具体数值进行比较的方式是：可以通过轮廓系数Silhouette等等来判断，Silhouette 遵循类紧致性。它的值用来描述一个目标对于目标所在簇与其他簇之间的相似性。其范围是从-1~+1，这个值越大表明目标与自己所在簇之间的匹配关系度越高，与其他簇的匹配关系度越低。如果这个值越高，那么聚类结果越好，如果是很小或是负值，那么可能是分簇太多或是太少造成的。另一种更加直观的方法就是观察。
对于这个wine数据集，我们分别使用kmeans和DBSCAN算法分别来聚类，得出了它们的轮廓系数：（放图）
题目3：那么，对于kmeans，分成几类是合适的？
P：嗯？分成3类和2类好像都可以？？甚至分2类的轮廓系数更高一点。
H：是的，在面对纯数据时，聚类效果的标准其实是不唯一的，也许有时候分两类的轮廓系数最大，但是分三类才是需求的，所以聚类并没有一个统一的标准，只能通过一些特征来做到类内相似，类外不相似的守则。
P：喔~其实在面对纯数据聚类时，我也有那么一些造物主的味道（把白酒和伏特加聚一块？？）
H：是的，那么最后，是一个抽象数据集，这是一个笑脸，要让这个笑脸的轮廓连续，我们应该使用哪种聚类方法呢？
题目5：从三种聚类方法中选一种，正确答案是DBSCAN（从kmeans和DBSCAN里面二选一）
H：好啦，模型都已经计算出来了！多亏了你，我们世界的花朵、酒类完成了聚类，变得清晰起来；
选择：笑脸选对：大家的脸上又可以呈现出笑容了！
选择：笑脸选错：不过大家的表情好像有点奇怪？？
P：啊，初学聚类，感觉还有很多事情要学！
H：没错，刚才的聚类只是很简单的例子，为了修复我们的世界，必然要用到更多聚类方法和评判标准，不过，对于一个大二学生来说，这些知识足够你消化一阵子了，所幸这个世界里的时间比外面流速更慢，以后的知识，就等以后在再来探索吧！
